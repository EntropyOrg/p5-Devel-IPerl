#!/bin/sh
# PODNAME: iperl
# ABSTRACT: start ipython notebook with a perl profile

CURDIR=`dirname "$0"`
TOP="$CURDIR/.."
TOP=`readlink -f "$TOP"`

PROFILE_DIR=`ipython locate profile perl`
if ! grep "Devel::IPerl" "$PROFILE_DIR"/ipython_config.py 2>&1 > /dev/null; then
	# create the perl profile
	ipython profile create perl
	PROFILE_DIR=`ipython locate profile perl`
	cp -pvR $TOP/profile/* "$PROFILE_DIR"/
fi
export PERL5LIB="$TOP/lib:$PERL5LIB"
ARGS=$@
if [ -z "$ARGS" ]; then
	ARGS="console"
fi
ipython $ARGS --profile perl
